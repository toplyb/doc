<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>docker 文档 | 小生</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/doc/logo.jpg">
    <meta name="description" content="">
    
    <link rel="preload" href="/doc/assets/css/0.styles.34624a27.css" as="style"><link rel="preload" href="/doc/assets/js/app.55c3453d.js" as="script"><link rel="preload" href="/doc/assets/js/8.d24c0c19.js" as="script"><link rel="preload" href="/doc/assets/js/2.4bf1ef1c.js" as="script"><link rel="preload" href="/doc/assets/js/39.7189ae83.js" as="script"><link rel="preload" href="/doc/assets/js/6.c61f64ae.js" as="script"><link rel="prefetch" href="/doc/assets/js/10.1794dce1.js"><link rel="prefetch" href="/doc/assets/js/11.7348ce53.js"><link rel="prefetch" href="/doc/assets/js/12.bde949e0.js"><link rel="prefetch" href="/doc/assets/js/13.e44e77f0.js"><link rel="prefetch" href="/doc/assets/js/14.2c096876.js"><link rel="prefetch" href="/doc/assets/js/15.04b1a976.js"><link rel="prefetch" href="/doc/assets/js/16.32759b05.js"><link rel="prefetch" href="/doc/assets/js/17.dbb60c8f.js"><link rel="prefetch" href="/doc/assets/js/18.03b80077.js"><link rel="prefetch" href="/doc/assets/js/19.eee1f2ca.js"><link rel="prefetch" href="/doc/assets/js/20.1eaa80af.js"><link rel="prefetch" href="/doc/assets/js/21.9922b078.js"><link rel="prefetch" href="/doc/assets/js/22.fd29b56c.js"><link rel="prefetch" href="/doc/assets/js/23.c58c98d5.js"><link rel="prefetch" href="/doc/assets/js/24.9c29ce1a.js"><link rel="prefetch" href="/doc/assets/js/25.ef46ee1e.js"><link rel="prefetch" href="/doc/assets/js/26.de496641.js"><link rel="prefetch" href="/doc/assets/js/27.da13abd9.js"><link rel="prefetch" href="/doc/assets/js/28.8c08f760.js"><link rel="prefetch" href="/doc/assets/js/29.6b20f3e7.js"><link rel="prefetch" href="/doc/assets/js/3.c59aa37e.js"><link rel="prefetch" href="/doc/assets/js/30.00daa87a.js"><link rel="prefetch" href="/doc/assets/js/31.1a7af06c.js"><link rel="prefetch" href="/doc/assets/js/32.e084e021.js"><link rel="prefetch" href="/doc/assets/js/33.8bd451b2.js"><link rel="prefetch" href="/doc/assets/js/34.449773cb.js"><link rel="prefetch" href="/doc/assets/js/35.515c6ca2.js"><link rel="prefetch" href="/doc/assets/js/36.01dfb55c.js"><link rel="prefetch" href="/doc/assets/js/37.a151c847.js"><link rel="prefetch" href="/doc/assets/js/38.d16ad425.js"><link rel="prefetch" href="/doc/assets/js/4.19992335.js"><link rel="prefetch" href="/doc/assets/js/40.1cb90e67.js"><link rel="prefetch" href="/doc/assets/js/41.924dc209.js"><link rel="prefetch" href="/doc/assets/js/42.af790c99.js"><link rel="prefetch" href="/doc/assets/js/43.e5884d54.js"><link rel="prefetch" href="/doc/assets/js/44.90020ef6.js"><link rel="prefetch" href="/doc/assets/js/45.613008c6.js"><link rel="prefetch" href="/doc/assets/js/46.6d19b814.js"><link rel="prefetch" href="/doc/assets/js/47.1d222ad8.js"><link rel="prefetch" href="/doc/assets/js/48.3020d496.js"><link rel="prefetch" href="/doc/assets/js/49.bc8d356a.js"><link rel="prefetch" href="/doc/assets/js/5.33fdb9ae.js"><link rel="prefetch" href="/doc/assets/js/50.2f24196f.js"><link rel="prefetch" href="/doc/assets/js/51.5f6b8b01.js"><link rel="prefetch" href="/doc/assets/js/52.cefb2c54.js"><link rel="prefetch" href="/doc/assets/js/53.8d54f4d2.js"><link rel="prefetch" href="/doc/assets/js/54.1a147765.js"><link rel="prefetch" href="/doc/assets/js/55.69bfd5dd.js"><link rel="prefetch" href="/doc/assets/js/56.5d4e614b.js"><link rel="prefetch" href="/doc/assets/js/57.c56b767f.js"><link rel="prefetch" href="/doc/assets/js/58.8475b38c.js"><link rel="prefetch" href="/doc/assets/js/59.f9d5d857.js"><link rel="prefetch" href="/doc/assets/js/60.72ae68d4.js"><link rel="prefetch" href="/doc/assets/js/61.c53a14d3.js"><link rel="prefetch" href="/doc/assets/js/62.2a29bf4e.js"><link rel="prefetch" href="/doc/assets/js/63.a965d548.js"><link rel="prefetch" href="/doc/assets/js/64.579fdc70.js"><link rel="prefetch" href="/doc/assets/js/65.e99f89c9.js"><link rel="prefetch" href="/doc/assets/js/66.a72528e3.js"><link rel="prefetch" href="/doc/assets/js/67.34c55aa2.js"><link rel="prefetch" href="/doc/assets/js/68.14388340.js"><link rel="prefetch" href="/doc/assets/js/69.e716df3c.js"><link rel="prefetch" href="/doc/assets/js/7.ce3d703b.js"><link rel="prefetch" href="/doc/assets/js/70.924cae61.js"><link rel="prefetch" href="/doc/assets/js/71.86436255.js"><link rel="prefetch" href="/doc/assets/js/72.2132e257.js"><link rel="prefetch" href="/doc/assets/js/73.e7f5742d.js"><link rel="prefetch" href="/doc/assets/js/9.bc51a707.js">
    <link rel="stylesheet" href="/doc/assets/css/0.styles.34624a27.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc/" class="home-link router-link-active"><img src="/doc/logo.jpg" alt="小生" class="logo"> <span class="site-name can-hide">小生</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doc/vue/" class="nav-link">
  Vue3
</a></div><div class="nav-item"><a href="/doc/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/doc/typescript/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><a href="/doc/server/" class="nav-link router-link-active">
  后端
</a></div><div class="nav-item"><a href="/doc/echarts/" class="nav-link">
  ECharts
</a></div><div class="nav-item"><a href="/doc/tools/" class="nav-link">
  相关工具
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doc/vue/" class="nav-link">
  Vue3
</a></div><div class="nav-item"><a href="/doc/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/doc/typescript/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><a href="/doc/server/" class="nav-link router-link-active">
  后端
</a></div><div class="nav-item"><a href="/doc/echarts/" class="nav-link">
  ECharts
</a></div><div class="nav-item"><a href="/doc/tools/" class="nav-link">
  相关工具
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>后端</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/doc/server/" aria-current="page" class="sidebar-link">php 文档</a></li><li><a href="/doc/server/mysql.html" class="sidebar-link">mysql 文档</a></li><li><a href="/doc/server/docker.html" aria-current="page" class="active sidebar-link">docker 文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/server/docker.html#镜像命令" class="sidebar-link">镜像命令</a></li><li class="sidebar-sub-header"><a href="/doc/server/docker.html#容器命令" class="sidebar-link">容器命令</a></li><li class="sidebar-sub-header"><a href="/doc/server/docker.html#其他常用命令" class="sidebar-link">其他常用命令</a></li><li class="sidebar-sub-header"><a href="/doc/server/docker.html#commit-镜像" class="sidebar-link">commit 镜像</a></li><li class="sidebar-sub-header"><a href="/doc/server/docker.html#数据卷" class="sidebar-link">数据卷</a></li><li class="sidebar-sub-header"><a href="/doc/server/docker.html#dockerfile" class="sidebar-link">Dockerfile</a></li><li class="sidebar-sub-header"><a href="/doc/server/docker.html#发布镜像" class="sidebar-link">发布镜像</a></li></ul></li><li><a href="/doc/server/linux.html" class="sidebar-link">linux 文档</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="镜像命令"><a href="#镜像命令" class="header-anchor">#</a> 镜像命令</h2> <h3 id="docker-images"><a href="#docker-images" class="header-anchor">#</a> <code>docker images</code></h3> <ul><li><p><code>docker images</code>: 查看本地的所有镜像</p></li> <li><p>后面可以跟的常用参数有 :</p> <ul><li>-a : 列出所有的镜像</li> <li>-q : 只显示镜像 id</li></ul></li> <li><p>REPOSITORY : 镜像的仓库源</p></li> <li><p>TAG : 镜像的标签</p></li> <li><p>TMAGE ID : 镜像的 id</p></li> <li><p>CREATED : 镜像的创建时间</p></li> <li><p>SIZE : 镜像的大小</p></li></ul> <h3 id="docker-search"><a href="#docker-search" class="header-anchor">#</a> <code>docker search</code></h3> <ul><li><code>docker search</code> : 搜索镜像</li> <li><code>docker search mysql --filter=STARS=3000</code>: 搜索 MySQL 镜像 stars 超过 3000 的镜像</li></ul> <h3 id="docker-pull"><a href="#docker-pull" class="header-anchor">#</a> <code>docker pull</code></h3> <ul><li><code>docker pull 镜像名称:[tag版本]</code> : 下载镜像, 默认下载最新版</li></ul> <h3 id="docker-rmi"><a href="#docker-rmi" class="header-anchor">#</a> <code>docker rmi</code></h3> <ul><li><code>docker rmi -f 镜像id</code> : 删除指定镜像, 如果要删除多个镜像, 则每个镜像 id 之间用空格隔开</li> <li><code>docker rmi -f $(docker images -aq)</code> : 删除所有的镜像</li></ul> <h2 id="容器命令"><a href="#容器命令" class="header-anchor">#</a> 容器命令</h2> <ul><li>有了镜像后才可以创建容器</li></ul> <h3 id="新建容器并启动"><a href="#新建容器并启动" class="header-anchor">#</a> 新建容器并启动</h3> <ul><li><p><code>docker run [可选参数] 镜像id</code></p></li> <li><p>参数:</p> <ul><li>--name=&quot;容器名称&quot;</li> <li>-d : 以后台方式运行</li> <li>-it : 进入到容器内部, 常用的是: <code>docker run -it centos /bin/bash</code></li> <li>-p : 指定容器端口
<ul><li>-p ip:主机端口:容器端口</li> <li>-p 主机端口:容器端口</li> <li>-p 容器端口</li> <li>容器端口</li></ul></li> <li>-P : 随机指定端口</li> <li>-e : 环境配置, 如配置 MySQL 密码</li></ul></li></ul> <h3 id="退出容器"><a href="#退出容器" class="header-anchor">#</a> 退出容器</h3> <ul><li><p><code>exit</code> : 退出并关闭容器</p></li> <li><p><code>command + p + q</code> : 退出但是不关闭容器</p></li></ul> <h3 id="查看正在运行中的容器"><a href="#查看正在运行中的容器" class="header-anchor">#</a> 查看正在运行中的容器</h3> <ul><li><code>docker ps</code></li> <li><code>docker ps -a</code> : 查看正在运行的容器和曾经运行过的容器</li> <li><code>docker ps -n=3</code>: 显示最近新建的 3 个容器</li> <li><code>docker ps -q</code> : 只显示容器的编号</li></ul> <h3 id="删除容器"><a href="#删除容器" class="header-anchor">#</a> 删除容器</h3> <ul><li><code>docker rm 容器id</code> : 删除指定的容器, 不能删除正在运行的容器, 如果想要删除正在运行的, 可以使用 rm -f</li> <li><code>docker rm -f $(docker ps -aq)</code> : 删除所有的容器</li> <li><code>docker ps -a -q|xargs docker rm</code> : 删除所有的容器</li></ul> <h3 id="启动容器"><a href="#启动容器" class="header-anchor">#</a> 启动容器</h3> <ul><li><code>docker start 容器id</code></li></ul> <h3 id="重启容器"><a href="#重启容器" class="header-anchor">#</a> 重启容器</h3> <ul><li><code>docker restart 容器id</code></li></ul> <h3 id="停止正在运行的容器"><a href="#停止正在运行的容器" class="header-anchor">#</a> 停止正在运行的容器</h3> <ul><li><code>docker stop 容器id</code></li></ul> <h3 id="强制停止正在运行的容器"><a href="#强制停止正在运行的容器" class="header-anchor">#</a> 强制停止正在运行的容器</h3> <ul><li><code>docker kill 容器id</code></li></ul> <h2 id="其他常用命令"><a href="#其他常用命令" class="header-anchor">#</a> 其他常用命令</h2> <h3 id="常看日志"><a href="#常看日志" class="header-anchor">#</a> 常看日志</h3> <ul><li><p><code>docker logs -tf 容器id</code> : 查看指定容器的日志</p></li> <li><p><code>docker logs -tf --tail 10 容器id</code> : 查看指定容器的最近 10 条的日志</p></li></ul> <h3 id="查看容器的进程信息"><a href="#查看容器的进程信息" class="header-anchor">#</a> 查看容器的进程信息</h3> <ul><li><code>docker top 容器id</code></li></ul> <h3 id="查看镜像的元数据"><a href="#查看镜像的元数据" class="header-anchor">#</a> 查看镜像的元数据</h3> <ul><li><code>docker inspect 镜像id</code></li></ul> <h3 id="进入当前正在运行的容器"><a href="#进入当前正在运行的容器" class="header-anchor">#</a> 进入当前正在运行的容器</h3> <ul><li><code>docker exec -it 容器id /bin/bash</code> : 进入容器后新开启一个终端, 可以在里面进行一些操作 (常用)</li> <li><code>docker attach 容器id</code> : 进入当前正在执行的终端</li></ul> <h3 id="从容器内拷贝文件到主机上"><a href="#从容器内拷贝文件到主机上" class="header-anchor">#</a> 从容器内拷贝文件到主机上</h3> <ul><li><code>docker cp 容器id:容器内路径 目的主机路径</code></li></ul> <h3 id="查看-cpu-状态"><a href="#查看-cpu-状态" class="header-anchor">#</a> 查看 CPU 状态</h3> <ul><li><code>docker stats</code></li></ul> <h3 id="增加-tag"><a href="#增加-tag" class="header-anchor">#</a> 增加 tag</h3> <ul><li><code>docker tag 镜像id 镜像名称:版本号</code></li></ul> <h2 id="commit-镜像"><a href="#commit-镜像" class="header-anchor">#</a> commit 镜像</h2> <ul><li><code>docker commit -m='提交的描述信息' -a='作者' 容器id 目标镜像名:[版本]</code></li></ul> <h2 id="数据卷"><a href="#数据卷" class="header-anchor">#</a> 数据卷</h2> <h3 id="查看所有的数据卷"><a href="#查看所有的数据卷" class="header-anchor">#</a> 查看所有的数据卷</h3> <ul><li><code>docker volume ls</code></li> <li>可以使用 <code>docker inspect 容器id</code> 来查看是否挂载成功, 在显示的信息中查看 Mounts 部分的内容</li></ul> <h3 id="指定路径挂载"><a href="#指定路径挂载" class="header-anchor">#</a> 指定路径挂载</h3> <ul><li><code>docker run -it -v 主机目录:容器内目录 镜像名称 /bin/bash</code></li></ul> <h3 id="匿名挂载"><a href="#匿名挂载" class="header-anchor">#</a> 匿名挂载</h3> <ul><li><code>docker run -it -v 容器内目录 镜像名称</code></li></ul> <h3 id="具名挂载"><a href="#具名挂载" class="header-anchor">#</a> 具名挂载</h3> <ul><li><p>大多数情况下都使用的是具名挂载</p></li> <li><p><code>docker run -it -v 随便起的名字:容器内目录 镜像名称</code></p></li> <li><p><code>docker run -it -v 随便起的名字:容器内目录:ro 镜像名称</code> : 其中 ro 表示的是只能读, read only, 表示的是不能在容器内部进行修改, 只能通过宿主机来修改</p></li> <li><p><code>docker run -it -v 随便起的名字:容器内目录:rw 镜像名称</code> : 其中 rw 表示的是可读可写, read write (默认的)</p></li></ul> <h3 id="使用-dockerfile-来挂载"><a href="#使用-dockerfile-来挂载" class="header-anchor">#</a> 使用 dockerfile 来挂载</h3> <ul><li><p>案例:</p> <ul><li><p><code>touch dockerfile</code></p></li> <li><p><code>vim dockerfile</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code> FROM centos
 VOLUME <span class="token punctuation">[</span><span class="token string">'volume01'</span>, <span class="token string">'volume02'</span><span class="token punctuation">]</span>
 
 CMD <span class="token builtin class-name">echo</span> <span class="token string">'====end======'</span>
 CMD /bin/bash
</code></pre></div></li> <li><p><code>docker build -f dockerfile -t xiaosheng/centos .</code></p> <ul><li>-f : 表示 dockerfile 文件的路径</li> <li>-t : 表示要生成的镜像名称</li> <li>. : 表示要生成在哪个目录下</li></ul></li> <li><p>最后可以使用 <code>docker inspect 镜像id</code> 来查看数据卷的详细信息</p></li></ul></li></ul> <h3 id="查看指定数据卷对应的目录"><a href="#查看指定数据卷对应的目录" class="header-anchor">#</a> 查看指定数据卷对应的目录</h3> <ul><li><code>docker volume inspect 具名挂载时起的名字</code></li> <li>当挂载数据卷并且没有指定路径的时候,<code>Linux</code> 中一般都是挂载在 <code>/var/lib/docker/volume</code> 目录中</li></ul> <h3 id="配置-mysql"><a href="#配置-mysql" class="header-anchor">#</a> 配置 MySQL</h3> <p><code>docker run -d -p 3306:3306 -v /home/mysql/my.conf:/etc/mysql/my.conf -v /home/mysql/data:/use/local/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql mysql:5.7</code></p> <ul><li>-e 可以用来配置 MySQL 密码, 可以同时挂载多个数据卷</li></ul> <h3 id="数据卷容器"><a href="#数据卷容器" class="header-anchor">#</a> 数据卷容器</h3> <ul><li><p>可以在多个容器之间共享数据</p></li> <li><p>案例</p> <ul><li><p>先开启一个 nginx01 的容器</p></li> <li><p>然后需要再开启一个 nginx02 的容器, 同时这两个容器之间需要数据共享, 那就在开启 nginx02 的时候就可以使用以下命令:</p> <p><code>docker run -it --name nginx02 --volumes-from nginx01 xiaosheng/centos</code></p></li> <li><p>同时还可以有其他的容器来和 nginx01 一起共享数据</p></li> <li><p>即便 nginx01 容器关掉或者销毁, 并不会影响到其他容器中共享的数据</p></li> <li><p>只要还有一个容器在使用, 那么数据就不会消失</p></li></ul></li></ul> <h2 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h2> <ul><li>dockerfile 是用来构建 docker 镜像的文件</li></ul> <h3 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤 :</h3> <ol><li>编写 dockerfile 文件</li> <li>docker build 构建成为一个镜像</li> <li>docker run 运行镜像</li> <li>docker push 发布镜像 (可以发布到 dockerhub 或者是 阿里云镜像仓库)</li></ol> <h3 id="dockerfile-文件"><a href="#dockerfile-文件" class="header-anchor">#</a> dockerfile 文件</h3> <ul><li><p>每一个保留关键字 (指令) 都必须是大写</p></li> <li><p>从上往下开始执行</p></li> <li><p># 表示注释</p></li> <li><p>每一个指令都会创建一个镜像层</p></li> <li><p>常用指令:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>FROM  			<span class="token comment"># 基础镜像</span>
MAINTAINER 		<span class="token comment"># 镜像作者, 一般是姓名&lt;邮箱&gt;</span>
RUN   			<span class="token comment"># 构建镜像的时候需要运行的命令</span>
ADD  			<span class="token comment"># 构建镜像的时候, 需要添加的内容, 比如要在 centos 镜像中添加一个 NGINX, 如果添加的是一个压缩包的话, 会自动解压</span>
WORKDIR 		<span class="token comment"># 镜像的工作目录</span>
VOLUME 			<span class="token comment"># 挂载的目录</span>
EXPOSE 			<span class="token comment"># 端口配置</span>
CMD 			<span class="token comment"># 容器启动的时候需要运行的命令, 只有最后一个会生效, 这个最后一个生效, 并不是指在 dockerfile 文件中, 在 dockerfile 文件中仍然可以有多个 CMD 命令, 指的是在使用 docker run 的时候, 后面不能加命令, 如果加了, 那么 docker run 后面的命令将会替换掉 dockerfile 文件中的命令</span>
ENTRYPOINT 		<span class="token comment"># 容器启动的时候需要运行的命令, 可以追加命令</span>
ONBUILD 		<span class="token comment"># 当构建一个被继承的 dockerfile 的时候, 会运行 ONBUILD 指令</span>
COPY 			<span class="token comment"># 将文件拷贝到镜像中</span>
ENV 			<span class="token comment"># 构建的时候设置环境变量</span>
</code></pre></div></li> <li><p>案例 (尝试构建自己的 centos)</p> <ul><li><p>编写 dockerfile 文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>FROM centos  <span class="token comment"># 基础镜像是 centos</span>
MAINTAINER xiaosheng<span class="token operator">&lt;</span><span class="token number">1029739052</span>@qq.com<span class="token operator">&gt;</span> <span class="token comment"># 作者信息</span>

ENV MYPATH /usr/local <span class="token comment"># 自定义一个变量 MYPATH, 值是 /usr/local</span>
WORKDIR <span class="token variable">$MYPATH</span> <span class="token comment"># 指定工作目录, 即用户当进去 centos 后所在的目录</span>

RUN yum -y <span class="token function">install</span> <span class="token function">vim</span> <span class="token comment"># 安装 vim</span>
RUN yum -y <span class="token function">install</span> net-tools <span class="token comment"># 安装 net-tools</span>

EXPOSE <span class="token number">80</span> <span class="token comment"># 暴露端口</span>
CMD <span class="token builtin class-name">echo</span> <span class="token variable">$MYPATH</span>
CMD <span class="token builtin class-name">echo</span> <span class="token string">&quot;===end====&quot;</span>
CMD /bin/bash
</code></pre></div></li> <li><p>开始构建</p> <p><code>docker build -f dockerfile文件的地址 -t 镜像名:[版本号]</code></p></li> <li><p>使用 <code>docker history 镜像id</code> 来查看镜像的构建历史</p></li></ul></li></ul> <h2 id="发布镜像"><a href="#发布镜像" class="header-anchor">#</a> 发布镜像</h2> <h3 id="发布到-dockerhub"><a href="#发布到-dockerhub" class="header-anchor">#</a> 发布到 dockerhub</h3> <ul><li>注册一个 dockerhub 的账号</li> <li><code>docker login -u 用户名</code>, 然后输入密码</li> <li><code>docker push 用户名(随便起的)/镜像名:版本号</code></li></ul> <h3 id="发布到阿里云"><a href="#发布到阿里云" class="header-anchor">#</a> 发布到阿里云</h3> <ul><li><p>可以先将 docker 的镜像更换成自己的阿里云中提供的镜像地址</p></li> <li><p>登录阿里云, 进入容器镜像</p></li> <li><p>创建命名空间和镜像仓库, 创建仓库的时候选择本地仓库</p></li></ul> <div data-v-3b73143e><ul class="rightMenuWrapper" data-v-3b73143e></ul></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/doc/server/mysql.html" class="prev">
        mysql 文档
      </a></span> <span class="next"><a href="/doc/server/linux.html">
        linux 文档
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/doc/assets/js/app.55c3453d.js" defer></script><script src="/doc/assets/js/8.d24c0c19.js" defer></script><script src="/doc/assets/js/2.4bf1ef1c.js" defer></script><script src="/doc/assets/js/39.7189ae83.js" defer></script><script src="/doc/assets/js/6.c61f64ae.js" defer></script>
  </body>
</html>
